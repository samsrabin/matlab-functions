file_list = { ...
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_constCO2_constClim/output-2019-03-12-083131/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_constCO2_constClim/output-2019-03-12-083131/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_RCP60/output-2019-02-27-093259/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_RCP60/output-2019-02-27-093259/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP60/output-2019-03-07-164546/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP60/output-2019-03-07-164546/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_RCP45/output-2019-02-27-103914/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_RCP45/output-2019-02-27-103914/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_1850-2010_remap6p3/output-2018-12-09-071305/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_1850-2010_remap6p3/output-2018-12-09-071305/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP60CO2_constClim/output-2019-06-19-120946/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP60CO2_constClim/output-2019-06-19-120946/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_RCP60/output-2019-02-27-093027/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_RCP60/output-2019-02-27-093027/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_RCP60co2_constClim/output-2019-03-07-164547/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_RCP60co2_constClim/output-2019-03-07-164547/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP45/output-2019-03-07-164549/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP45/output-2019-03-07-164549/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_constCO2_constClim/output-2019-03-12-091426/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_constCO2_constClim/output-2019-03-12-091426/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP85clim_constCO2/output-2019-06-19-124811/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP85clim_constCO2/output-2019-06-19-124811/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP45CO2_constClim/output-2019-06-19-120106/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP45CO2_constClim/output-2019-06-19-120106/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_constCO2_constClim/output-2019-03-12-080759/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_constCO2_constClim/output-2019-03-12-080759/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_RCP85/output-2019-02-27-104120/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_RCP85/output-2019-02-27-104120/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_RCP85co2_constClim/output-2019-03-07-170908/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_RCP85co2_constClim/output-2019-03-07-170908/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_RCP45co2_constClim/output-2019-03-07-164547/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_RCP45co2_constClim/output-2019-03-07-164547/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_1850-2010_remap6p7/output-2019-02-18-120851/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_1850-2010_remap6p7/output-2019-02-18-120851/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_RCP60_constCO2/output-2019-03-07-170858/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_RCP60_constCO2/output-2019-03-07-170858/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP85/output-2019-03-07-164546/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP85/output-2019-03-07-164546/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_RCP60co2_constClim/output-2019-03-07-170847/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP4_RCP60co2_constClim/output-2019-03-07-170847/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_RCP60_constCO2/output-2019-03-07-170846/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP3_RCP60_constCO2/output-2019-03-07-170846/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP85CO2_constClim/output-2019-06-19-122314/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP85CO2_constClim/output-2019-06-19-122314/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP45clim_constCO2/output-2019-06-19-122601/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP45clim_constCO2/output-2019-06-19-122601/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP60clim_constCO2/output-2019-06-19-123448/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_constLU_RCP60clim_constCO2/output-2019-06-19-123448/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_constCO2_constClim/output-2019-03-12-094118/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_constCO2_constClim/output-2019-03-12-094118/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_RCP85_constCO2/output-2019-03-07-170910/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP5_RCP85_constCO2/output-2019-03-07-170910/first_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_RCP45_constCO2/output-2019-03-07-164547/last_decade.mat' ;
    '/Users/Shared/PLUM/trunk_runs/LPJGPLUM_2011-2100_harm3_SSP1_RCP45_constCO2/output-2019-03-07-164547/first_decade.mat' ;
    } ;

Nfiles = length(file_list) ;
for f = 1:Nfiles
    fprintf('%d of %d...\n', f, Nfiles) ;
    file_in = file_list{f} ;
    file_out = strrep(file_in, '.mat', '.garr.mat') ;
    if exist(file_out, 'file')
        fprintf('    Already exists, skipping: %s\n', file_out) ;
        continue
    end
%     if contains(file_in, 'first')
%         dX = 'd1' ;
%     else
%         dX = 'd9' ;
%     end
    in_struct = load(file_in) ;
    vars = fieldnames(in_struct) ;
    Nvars = length(vars) ;
    for v = 1:Nvars
        fprintf('    %d of %d...\n', v, Nvars) ;
        thisVar = vars{v} ;
        eval(sprintf('%s = lpjgu_convert_mapsstruct_to_garrstruct(in_struct.%s) ;', thisVar, thisVar)) ;
        if v==1
            save(out_file, thisVar, '-v7.3') ;
        else
            save(out_file, thisVar, '-v7.3') ;
        end
        clear(thisVar)
    end
    clear in_struct
end
    
    
    
    
    
    
    